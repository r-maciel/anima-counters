"use strict";function _createForOfIteratorHelper(a,b){var c;if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=a[Symbol.iterator]()},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c["return"]||c["return"]()}finally{if(h)throw f}}}}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var animaCounter=/*#__PURE__*/function(){function a(b,c){var d,e;_classCallCheck(this,a);// Merge default options with user options
var f=_objectSpread({duration:300,start:0,effect:"scroll",delay:0,numberDuration:0},c);this.element=b;// Format the incomming number, separating decimals and removing spaces
var g=this.element.innerHTML.replace(/\s/g,"").split(".");switch(this.decimals=g[1]?g[1].length:0,this.number=parseInt(g.join("")),this.start=b.dataset.animaCounterStart?parseInt(b.dataset.animaCounterStart):f.start,this.duration=b.dataset.animaCounterDuration?parseInt(b.dataset.animaCounterDuration):f.duration,this.delay=b.dataset.animaCounterDelay?parseInt(b.dataset.animaCounterDelay):f.delay,this.direction=this.number>=this.start?"up":"down",this.effect=null!==(d=b.dataset.animaCounterEffect)&&void 0!==d?d:f.effect,this.style=null!==(e=b.dataset.animaCounterStyle)&&void 0!==e?e:f.style,this.numberDuration=b.dataset.animaCounterNumberDuration?parseInt(b.dataset.animaCounterNumberDuration):f.numberDuration,this.base=10,this.printNumber(),10>this.numberDuration&&this.getCountersTimers(),this.effect){case"none":this.play();break;case"scroll":this.scrollEffect();break;case"customize":break;default:this.scrollEffect();}}return _createClass(a,[{key:"scrollEffect",value:function scrollEffect(){var a=this,b=new IntersectionObserver(function callback(b,c){b.forEach(function(b){b.isIntersecting&&(a.play(),c.unobserve(b.target))})},{threshold:.4});b.observe(this.element)}},{key:"getCountersTimers",value:function getCountersTimers(){var a=Math.abs,b=a(this.number-this.start);b>this.duration?(this.counters=this.calculateCountersTimers(b,this.duration),this.timers=[{times:this.duration,value:1}]):b<this.duration?(this.counters=[{times:b,value:1}],this.timers=this.calculateCountersTimers(this.duration,b)):(this.counters=[{times:b,value:1}],this.timers=[{times:this.duration,value:1}])}},{key:"calculateCountersTimers",value:function calculateCountersTimers(a,b){var c=Math.floor,d=a%b,e=c(a/b),f={times:b-d,value:e};if(0<d){return[f,{times:d,value:e+1}]}return[f]}},{key:"pause",value:function pause(){clearTimeout(this.animationTimer)}},{key:"play",value:function play(){var a=this;10<=this.numberDuration?this.counterPerNumber():10<this.delay?setTimeout(function(){return a.counter()},this.delay):this.counter()}},{key:"counterPerNumber",value:function counterPerNumber(){var a=this;this.printNumber(),this.start<this.number&&(this.start+=1,setTimeout(function(){return a.counterPerNumber()},this.numberDuration)),this.start>this.number&&(this.start-=1,setTimeout(function(){return a.counterPerNumber()},this.numberDuration))}},{key:"counter",value:function counter(){this.printNumber();// How much numbers will be the increment or the decrement in the count
var a=0<this.counters[0].times?this.counters[0].value:this.counters[1]?this.counters[1].value:0;//For count up
this.start<this.number&&(this.start+=a,this.counters[0].times-=1,this.counterInterval()),this.start>this.number&&(this.start-=a,this.counters[0].times-=1,this.counterInterval())}},{key:"counterInterval",value:function counterInterval(){var a=this;this.animationTimer=setTimeout(function(){return a.counter()},// Multiply by 10 for 10 milliseconds as min for interval
(0<this.timers[0].times?this.timers[0].value:this.timers[1].value)*this.base),this.timers[0].times-=1}},{key:"printNumber",value:function printNumber(){// Format the number to print it
if(0<this.decimals){var a=0>this.start?"-":"",b=this.start.toString().replace("-",""),c=a+b.slice(0,-this.decimals),d=b.slice(-this.decimals);d=d.length<this.decimals?"0".repeat(this.decimals-d.length)+d:d,this.element.innerHTML=parseFloat("".concat(c,".").concat(d)).toLocaleString(this.style,{minimumFractionDigits:this.decimals})}else this.element.innerHTML=this.start.toLocaleString(this.style)}}]),a}(),initAnimaCounter=function(a){var b,c=document.querySelectorAll(".anima-counter"),d=_createForOfIteratorHelper(c);try{for(d.s();!(b=d.n()).done;)var e=b.value,f=new animaCounter(e,a)}catch(a){d.e(a)}finally{d.f()}};"undefined"!=typeof exports&&(module.exports={initAnimaCounter:initAnimaCounter,animaCounter:animaCounter});